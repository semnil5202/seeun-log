---
/** 추천 포스트 리스트. RightSidebar(PC)와 게시글 하단(모바일) 공용. */

import { t } from "@/shared/lib/i18n/translations";
import type { Locale } from "@/shared/types/common";
import type { LocalizedPost } from "@/shared/types/post";
import SponsoredPostItem from "./SponsoredPostItem.astro";
import InFeedAdsense from "@/shared/components/ad/InFeedAdsense.astro";

interface Props {
  locale: Locale;
  posts: LocalizedPost[];
  currentSlug?: string;
}

const { locale, posts, currentSlug } = Astro.props;
const sponsoredLabel = t("sidebar.sponsored", locale);
const emptyLabel = t("sidebar.empty", locale);
---

<section>
  <h2 class="text-[16px] font-bold text-gray-900 pb-2 border-b border-gray-200">
    {sponsoredLabel}
  </h2>

  {posts.length > 0 ? (
    <>
      <ul role="list">
        {posts.slice(0, 2).map((post) => (
          <SponsoredPostItem post={post} currentSlug={currentSlug} locale={locale} />
        ))}
      </ul>

      <InFeedAdsense class="h-[100px] my-4" />

      {posts.length > 2 && (
        <ul role="list" class="border-t border-gray-100">
          {posts.slice(2, 4).map((post) => (
            <SponsoredPostItem post={post} currentSlug={currentSlug} locale={locale} />
          ))}
        </ul>
      )}
    </>
  ) : (
    <p class="text-caption1 text-gray-400 text-center py-6">{emptyLabel}</p>
  )}
</section>
