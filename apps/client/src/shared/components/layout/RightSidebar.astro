---
/** PC 전용 우측 사이드바. 애드센스 영역과 협찬 포스트를 표시한다. */

import { t } from "@/shared/lib/i18n/translations";
import { getLocalePath } from "@/shared/lib/i18n/locales";
import type { Locale } from "@/shared/types/common";
import type { LocalizedPost } from "@/shared/types/post";

interface Props {
  locale: Locale;
  sponsoredPosts?: LocalizedPost[];
}

const { locale, sponsoredPosts = [] } = Astro.props;
---

<aside
  class="hidden lg:block w-[336px] shrink-0"
  aria-label="Advertisement and sponsored posts"
>
  <div class="sticky top-20 pt-2 pb-6 space-y-8">

    <div
      class="w-[336px] h-[280px] bg-gray-100 rounded-xl flex items-center justify-center"
      role="complementary"
      aria-label="Advertisement"
    >
      <span class="text-sm text-gray-400 select-none">Adsense</span>
    </div>

    <section aria-labelledby="sidebar-sponsored-heading">
      <h2
        id="sidebar-sponsored-heading"
        class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 pb-2 border-b border-gray-100"
      >
        {t("sidebar.sponsored", locale)}
      </h2>

      {
        sponsoredPosts.length > 0 ? (
          <ul class="space-y-4" role="list">
            {sponsoredPosts.map((post) => (
              <li>
                <a
                  href={getLocalePath(
                    `/${post.category}/${post.sub_category}/${post.slug}/`,
                    locale
                  )}
                  class="group flex items-start gap-3 hover:opacity-90 transition-opacity duration-150"
                >
                  <div class="shrink-0 w-16 h-16 rounded-lg overflow-hidden bg-gray-100">
                    <img
                      src={post.thumbnail}
                      alt={post.title}
                      width={64}
                      height={64}
                      loading="lazy"
                      decoding="async"
                      class="w-full h-full object-cover"
                    />
                  </div>

                  <div class="flex-1 min-w-0">
                    <span class="inline-block text-[10px] font-semibold text-primary-400 bg-primary-50 px-1.5 py-0.5 rounded mb-1">
                      {t("post.sponsored", locale)}
                    </span>
                    <p class="text-sm font-semibold text-gray-800 line-clamp-2 group-hover:text-primary-500 transition-colors duration-150 leading-snug">
                      {post.title}
                    </p>
                  </div>
                </a>
              </li>
            ))}
          </ul>
        ) : (
          <p class="text-xs text-gray-400 italic" />
        )
      }
    </section>

  </div>
</aside>
