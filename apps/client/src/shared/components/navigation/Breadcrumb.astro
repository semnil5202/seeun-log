---
/** 포스트 상세 페이지용 시각적 브레드크럼 네비게이션. Schema.org BreadcrumbList 마이크로데이터를 포함한다. */
import type { BreadcrumbItem } from "@/shared/types/seo";
import type { Locale } from "@/shared/types/common";
import { getLocalePath } from "@/shared/lib/i18n/locales";

interface Props {
  items: BreadcrumbItem[];
  locale: Locale;
}

const { items, locale } = Astro.props;
---

<nav aria-label="breadcrumb" class="w-full">
  <ol
    class="flex flex-wrap items-center gap-x-1 gap-y-1 text-sm text-gray-500"
    itemscope
    itemtype="https://schema.org/BreadcrumbList"
  >
    {items.map((item, idx) => {
      const isLast = idx === items.length - 1;
      const localizedHref = getLocalePath(item.url, locale);

      return (
        <li
          class="flex items-center gap-x-1"
          itemprop="itemListElement"
          itemscope
          itemtype="https://schema.org/ListItem"
        >
          {isLast ? (
            <span
              class="font-semibold text-gray-800"
              aria-current="page"
              itemprop="name"
            >
              {item.name}
            </span>
          ) : (
            <>
              <a
                href={localizedHref}
                class="hover:text-primary-600 hover:underline underline-offset-2 transition-colors"
                itemprop="item"
              >
                <span itemprop="name">{item.name}</span>
              </a>

              <span class="text-gray-300 select-none" aria-hidden="true">/</span>
            </>
          )}

          <meta itemprop="position" content={String(idx + 1)} />
        </li>
      );
    })}
  </ol>
</nav>
