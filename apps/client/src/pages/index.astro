---
/** 한국어 홈 페이지 (/) */

import ListLayout from "@/layouts/ListLayout.astro";
import PostCardGrid from "@/components/post/PostCardGrid.astro";
import Pagination from "@/components/navigation/Pagination.astro";
import BreadcrumbJsonLd from "@/components/seo/BreadcrumbJsonLd.astro";
import { DEFAULT_LOCALE } from "@/types/common";
import type { LocalizedPost } from "@/types/post";
import { getPaginatedPosts, getSponsoredPosts, getRecommendedPosts } from "@/lib/api/posts";

const locale = DEFAULT_LOCALE;

const [{ posts, totalPages }, sponsored, recommended] = await Promise.all([
  getPaginatedPosts(1),
  getSponsoredPosts(),
  getRecommendedPosts(),
]);

const sponsoredLocalized: LocalizedPost[] = sponsored.map((p) => ({ ...p, locale }));
const recommendedLocalized: LocalizedPost[] = recommended.map((p) => ({ ...p, locale }));

const breadcrumbItems = [{ name: "홈", url: "/" }];

const SITE_DESCRIPTION =
  "세은로그 — 커플이 함께 다녀온 맛집, 카페, 여행지를 솔직하게 리뷰합니다.";
---

<ListLayout
  title="세은로그 - 맛집, 카페, 여행 커플 블로그"
  description={SITE_DESCRIPTION}
  canonical="/"
  path="/"
  locale={locale}
  sponsoredPosts={sponsoredLocalized}
  recommendedPosts={recommendedLocalized}
>
  <BreadcrumbJsonLd slot="head" items={breadcrumbItems} />

  <PostCardGrid posts={posts} locale={locale} />

  {totalPages > 1 && (
    <Pagination
      currentPage={1}
      totalPages={totalPages}
      baseUrl="/"
      locale={locale}
    />
  )}
</ListLayout>
